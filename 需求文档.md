### 第一阶段：核心体验增强 (Core Experience)
*目标：解决当前“能用”但“不够好用”的痛点，对齐商业级产品的流畅度。*

#### 1. 流式响应与打字机效果 (Streaming Response)
* **现状：** 目前大概率是等待 AI 生成完一整页或整段话后一次性显示，用户会有“假死”的等待焦虑。
* **需求描述：**
    * **前端改造：** 使用 `fetch` 的 `ReadableStream` 或 EventSource 接收数据。
    * **UI 交互：** 实现 Markdown 渲染的“打字机效果”，文字逐字出现，并在光标处闪烁。
    * **状态同步：** 在流式输出过程中，禁止用户进行重写/排序操作，避免状态冲突。

#### 2. 颗粒度容错与重试 (Granular Error Handling)
* **现状：** 只有全局的生成，若某一页生成失败（网络波动或内容违规），可能需要重头再来。
* **需求描述：**
    * **单页重试：** 在每一张幻灯片的预览卡片右上角增加“刷新/重试”按钮。
    * **降级策略：** 如果配图 API（DALL-E 3）失败，自动降级为“网络搜图”或显示占位符，而不是让整个流程崩溃。

#### 3. 历史记录与草稿箱 (Session Management)
* **现状：** 刷新页面可能导致当前进度丢失（虽然 Store 里有逻辑，但需要明确的 UI 入口）。
* **需求描述：**
    * **本地快照：** 使用 IndexedDB 或 LocalStorage 自动保存最近 5 次的生成记录。
    * **侧边栏历史：** 在左侧增加“历史记录”抽屉，点击可恢复之前的 PPT 大纲和内容。

---

### 第二阶段：高价值新增功能 (High-Value Features)
*目标：增加“人无我有”的功能，从玩具变为生产力工具。*

#### 4. 企业级品牌规范 (Brand Identity System)
* **现状：** 仅支持内置的 11 种主题。
* **新增需求：**
    * **Logo 上传：** 允许用户上传 PNG/SVG Logo，自动放置在 PPT 母版（Master Slide）的右上角或页脚。
    * **自定义配色：** 增加一个“自定义主题”选项，允许用户输入主色（Primary Color）和强调色（Accent Color）的 Hex 值。
    * **逻辑：** 导出 PPT 时，将这些颜色写入 PPT 的 Theme XML 中，确保图表和形状颜色一致。

#### 5. 逻辑图表生成 (Logic Visualizations)
* **现状：** 已支持数据图表（ECharts），但缺乏概念类图表。
* **新增需求：**
    * **功能：** 支持将文本转化为逻辑图，如 SWOT 分析、流程图、金字塔层级、环形图。
    * **实现：**
        * *方案 A（简单）：* 使用 Mermaid.js 渲染预览，导出时生成对应的 SmartArt 占位符或图片。
        * *方案 B（高级）：* 预设几个 Vue 组件（如四象限图组件），AI 返回 JSON 数据填充这些组件，导出时使用 PptxGenJS 绘制对应形状。

#### 6. 结构化指令增强 (Context Injection)
* **现状：** 仅支持主题和文档输入，README 中列为“计划中”。
* **新增需求：**
    * **UI 升级：** 在输入框下方增加折叠面板“高级设置”。
    * **参数字段：**
        * `演讲对象`（Select：投资人/学生/同行/大众） -> 影响 System Prompt 的语气。
        * `详细程度`（Select：详尽/精简） -> 影响 Token 输出量。
        * `语言`（Select：中文/英文/日文） -> 强制输出语言。

---

### 第三阶段：深度编辑能力 (Advanced Editing)
*目标：让用户在导出前能在网页端完成 90% 的修改。*

#### 7. 撤销/重做机制 (Undo/Redo)
* **需求描述：**
    * 基于 Pinia 实现 `State History`。
    * 监听 `presentation` store 的变化，按 `Ctrl+Z` 可撤销删除页面、修改文字等操作。

#### 8. 沉浸式演示模式 (Immersive Preview)
* **需求描述：**
    * 点击“预览”按钮，浏览器全屏，隐藏所有编辑器 UI（侧边栏、工具栏）。
    * 支持键盘左右键翻页，模拟真实的 PPT 放映效果，方便用户在下载前预演逻辑。

---

### 推荐执行路线图 (Roadmap)

建议按照以下优先级进行迭代，这样每一步都有可感知的产出：

| 优先级 | 功能模块 | 开发难度 | 价值描述 |
| :--- | :--- | :--- | :--- |
| **P0** | **流式响应 (Stream)** | ⭐⭐⭐ | **极高**。解决 AI 响应慢的焦虑，显著提升 App 质感。 |
| **P0** | **结构化指令 (Context)** | ⭐ | **高**。低成本实现，显著提高内容生成的准确度。 |
| **P1** | **单页重试/错误处理** | ⭐⭐ | **中**。提高稳定性，防止 Token 浪费。 |
| **P1** | **品牌规范 (Logo/Color)** | ⭐⭐ | **高**。吸引商务用户的关键特性。 |
| **P2** | **逻辑图表 (SWOT等)** | ⭐⭐⭐⭐ | **高**。不仅是文字和数据，而是“观点可视化”。 |
| **P2** | **撤销/重做** | ⭐⭐⭐ | **中**。提升编辑器的可用性。 |
